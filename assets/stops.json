{
  "$view": {
    "attributes": {
      "_id": "garage",
      "statusBar.style": "dark",
      "bg.color": "#cdcdcd"
    },
    "actions": [
      {
        "_type": "Function",
        "attributes": {
          "_target": "$app",
          "functionName": "location.auth.request"
        },
        "on": "willAppear"
      }
    ],
    "controls": [
      {
        "_id": "layoutMain",
        "_type": "Layout",
        "attributes": {
          "size.w": "100%",
          "size.h": "100%",
          "visible": true,
          "bg.color": "ffffff",
          "layoutType": "float"
        },
        "controls": [
          {
            "_id": "customHeader",
            "_type": "Custom",
            "actions": [
              {
                "_type": "Function",
                "attributes": {
                  "_target": "$app",
                  "functionName": "drawer.l.toggle"
                },
                "on": "button.left"
              }
            ],
            "attributes": {
              "size.w": "100%",
              "size.h": 62,
              "visible": true,
              "title": "Stops",
              "controlLocation": "/controls/header.json",
              "button.left": "../images/btnMenu_42x42.png",
              "layoutType": "float"
            },
            "controls": []
          },
          {
            "_id": "mapControl",
            "_type": "Map",
            "actions": [
              {
                "_type": "Modify",
                "attributes": {
                  "_target": "$session"
                },
                "on": "touch",
                "set": {
                  "stop_id": "[[$row.stop_id]]",
                  "stop_lat": "[[$row.stop_lat]]",
                  "stop_lon": "[[$row.stop_lon]]",
                  "stop_name": "[[$row.stop_name]]"
                }
              },
              {
                "_type": "Alert",
                "attributes": {
                  "title": "[[$session.stop_id]]"
                },
                "enabled": false,
                "on": "touch"
              },
              {
                "_type": "Navigate",
                "attributes": {
                  "1nav_animation_duration": 0,
                  "1nav_animation_type": "crossDissolve",
                  "1nav_stack_type": "push",
                  "to": "stop.json"
                },
                "on": "touchUp"
              }
            ],
            "attributes": {
              "animatePinDrop.enabled": true,
              "pin": {
                "lat": "[[$row.stop_lat]]",
                "long": "[[$row.stop_lon]]",
                "subtitle": "[[$row.stop_name]]",
                "title": "[[$row.stop_name]]",
                "image": "/images/pin_32x60_red@2x.png"
              },
              "datasource.id": "stops",
              "size.h": "[[$device.screen.width]]",
              "size.w": "100%",
              "userLocation.enabled": true,
              "zoomLevel": 12
            }
          },
          {
            "_id": "layoutDivider",
            "_type": "Layout",
            "attributes": {
              "size.w": "100%",
              "size.h": 1,
              "bg.color": "e3e5e6"
            }
          },
          {
            "_id": "tableMenu",
            "_type": "Table",
            "actions": [],
            "attributes": {
              "bg.color": "#ffffff",
              "datasource.id": "stops",
              "enabled": true,
              "cell.size.h": 60,
              "cell.size.w": "100%",
              "margin.top": 0,
              "reloadAnimation.enabled": false,
              "separator.style": "none",
              "autofill.h": true,
              "size.w": "100%"
            },
            "controls": [
              {
                "_id": "layoutThumbnail",
                "_type": "Layout",
                "actions": [
                  {
                    "_type": "Modify",
                    "attributes": {
                      "_target": "$session"
                    },
                    "on": "touch",
                    "set": {
                      "stop_id": "[[$row.stop_id]]",
                      "stop_lat": "[[$row.stop_lat]]",
                      "stop_lon": "[[$row.stop_lon]]",
                      "stop_name": "[[$row.stop_name]]"
                    }
                  },
                  {
                    "_type": "Alert",
                    "attributes": {
                      "title": "[[$session.stop_id]]"
                    },
                    "enabled": false,
                    "on": "touch"
                  },
                  {
                    "_type": "Navigate",
                    "attributes": {
                      "1nav_animation_duration": 0,
                      "1nav_animation_type": "crossDissolve",
                      "1nav_stack_type": "push",
                      "to": "stop.json"
                    },
                    "on": "touchUp"
                  }
                ],
                "attributes": {
                  "size.h": "100%",
                  "size.w": "100%"
                },
                "controls": [
                  {
                    "_id": "textMenuName",
                    "_type": "Text",
                    "attributes": {
                      "color": "#434a54",
                      "bg.color": "#ff00ff00",
                      "align.h": "left",
                      "margin.left": 17,
                      "text.align": "left",
                      "font": "Aileron-Regular:16",
                      "layoutType": "float",
                      "align.v": "middle",
                      "text": "[[$row.stop_name]]"
                    }
                  },
                  {
                    "_id": "btnMenu",
                    "_type": "Image",
                    "attributes": {
                      "margin.right": 17,
                      "size.h": 10,
                      "size.w": 7,
                      "margin.top": 0,
                      "align.v": "middle",
                      "align.h": "right",
                      "tint": "7e858c",
                      "image": "/images/btnChevron_7x10.png",
                      "layoutType": "float"
                    }
                  },
                  {
                    "_id": "layoutDivider",
                    "_type": "Layout",
                    "attributes": {
                      "size.w": "100%",
                      "size.h": 1,
                      "bg.color": "e3e5e6",
                      "align.v": "bottom",
                      "layoutType": "absolute"
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "datasources": [
      {
        "_id": "stops",
        "_type": "HTTP",
        "actions": [
          {
            "_type": "Function",
            "attributes": {
              "_target": "mapControl",
              "functionName": "showAllPins",
              "delay": 1
            },
            "enabled": true,
            "on": "success"
          },
          {
            "_type": "Refresh",
            "attributes": {
              "_target": "textD1ishwasher"
            },
            "on": "success"
          }
        ],
        "attributes": {
          "data.basepath": "entities",
          "cache.enabled": false,
          "autoLoad.enabled": true,
          "method": "GET",
          "responseType": "json",
          "url": "/data/stops.json",
          "requestType": "json"
        }
      }
    ]
  }
}